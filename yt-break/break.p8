pico-8 cartridge // http://www.pico-8.com
version 42
__lua__


function _init()
	cls()
	ball_x=28
	ball_y=8
	
	ball_dx=2
	ball_dy=2
	
	ball_r=2
	ball_dr=0.5
	
	ball_color=10
	
	pad_x=30
	pad_dx=0
	pad_y=120
	pad_dy=0
	pad_w=24
	pad_h=3
	pad_col=6
end

function ball_hitbox(box_x, box_y, box_w, box_h)
	if ball_y-ball_r > box_y+box_h then
		return false
	end
		
	if ball_y+ball_r < box_y then
		return false
	end

	if ball_x-ball_r > box_x+box_w then
		return false
	end
		
	if ball_x+ball_r < box_x then
		return false
	end

	return true
end

function _update()

	local button_pressed=false
	
	if btn(0) then
		-- left
		pad_dx=-5
		button_pressed=true
	end
	if btn(1) then
		-- right
		pad_dx=5
		button_pressed=true
	end
	
	if not(button_pressed) then
		pad_dx/=1.6
	end

	pad_x+=pad_dx
	pad_y+=pad_dy
	
	ball_x+=ball_dx
	ball_y+=ball_dy
	
	if ball_r > 3 or ball_r < 1 then
		ball_dr=-ball_dr
	end

	if ball_x > 127 or ball_x < 0 then
		ball_dx=-ball_dx
		sfx(0)
	end

	if ball_y > 127 or ball_y < 0 then
		ball_dy=-ball_dy
		sfx(0)
	end

	pad_col=6
	if ball_hitbox(pad_x, pad_y, pad_w, pad_h) then
		-- collision
		pad_col=2
		ball_dy=-ball_dy
		sfx(1)
	end
	
end

function _draw()
	rectfill(0,0, 127, 127, 1)
	circfill(ball_x, ball_y, ball_r, ball_color)
	rectfill(pad_x, pad_y, pad_x+pad_w, pad_y+pad_h, pad_col)
end


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000018330173501335013350173501a3301831000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000019150181501515013150101500a1500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
